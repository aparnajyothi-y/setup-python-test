name: test-python3-config

on:
  workflow_dispatch:

jobs:
  check-python3-config:
    runs-on: ${{ matrix.os }}
    strategy:
      matrix:
        os: [ubuntu-latest, macos-latest, windows-latest]
        python-version: ['3.9', '3.10', '3.11', '3.12']

    steps:
      - uses: actions/checkout@v4

      - name: Set up Python
        uses: actions/setup-python@v5
        with:
          python-version: ${{ matrix.python-version }}

      - name: Check python3-config presence
        run: |
          echo "Python version:"
          python --version
          echo "Where is python3-config?"
          which python3-config || echo "python3-config not found"
          echo "Try running python3-config --embed (if available):"
          python3-config --embed || echo "Not available"
        shell: bash
        if: runner.os != 'Windows'

      - name: Windows fallback check
        run: |
          echo "On Windows, check for python3-config:"
          where python3-config || echo "python3-config not found"
        if: runner.os == 'Windows'
